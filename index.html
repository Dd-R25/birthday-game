<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dodge the Blocks - Birthday Game</title>
<style>
  body { margin:0; background:#f0f8ff; font-family:sans-serif; text-align:center; overflow:hidden; }
  canvas { background:#87ceeb; display:block; margin:0 auto; }
  #message { position:absolute; top:40%; left:50%; transform:translate(-50%,-50%); font-size:2em; display:none; color:#ff1493; }
</style>
</head>
<body>

<canvas id="gameCanvas"></canvas>
<div id="message">
  ðŸŽ‰ CONGRATULATIONS! ðŸŽ‰<br>
  You survived the falling blocks!<br>
  Your birthday gift is:<br>
  ðŸ“± An iPhone 17!<br>
  Pick your color! ðŸ’›ðŸ’™ðŸ’šðŸ’œ
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let width = window.innerWidth;
let height = window.innerHeight;
canvas.width = width;
canvas.height = height;

let player = { x: width/2 - 25, y: height - 60, width: 50, height: 50, color: '#ff4500' };
let blocks = [];
let blockSpeed = 3;
let score = 0;
let gameOver = false;

function createBlock() {
  let size = 40 + Math.random()*20;
  let x = Math.random()*(width - size);
  blocks.push({ x: x, y: -size, width: size, height: size, color: '#32cd32' });
}

function drawPlayer() {
  ctx.fillStyle = player.color;
  ctx.fillRect(player.x, player.y, player.width, player.height);
}

function drawBlocks() {
  blocks.forEach(b => {
    ctx.fillStyle = b.color;
    ctx.fillRect(b.x, b.y, b.width, b.height);
  });
}

function updateBlocks() {
  blocks.forEach(b => { b.y += blockSpeed; });
  blocks = blocks.filter(b => b.y < height);
}

function checkCollision() {
  for(let b of blocks){
    if(player.x < b.x + b.width &&
       player.x + player.width > b.x &&
       player.y < b.y + b.height &&
       player.y + player.height > b.y){
      gameOver = true;
    }
  }
}

function drawScore() {
  ctx.fillStyle = '#000';
  ctx.font = '24px sans-serif';
  ctx.fillText(`Score: ${score}`, 20, 30);
}

function gameLoop() {
  if(gameOver){
    document.getElementById('message').style.display = 'block';
    return;
  }

  ctx.clearRect(0,0,width,height);
  drawPlayer();
  drawBlocks();
  drawScore();
  updateBlocks();
  checkCollision();

  score++;
  if(score % 60 === 0) createBlock();
  requestAnimationFrame(gameLoop);
}

gameLoop();

// Player movement - keyboard
document.addEventListener('keydown', e => {
  if(e.key === 'ArrowLeft') player.x -= 30;
  if(e.key === 'ArrowRight') player.x += 30;
  if(player.x < 0) player.x = 0;
  if(player.x + player.width > width) player.x = width - player.width;
});

// Player movement - touch for mobile
let touchX = null;
canvas.addEventListener('touchstart', e => { touchX = e.touches[0].clientX; });
canvas.addEventListener('touchmove', e => {
  let newX = e.touches[0].clientX;
  if(touchX !== null){
    let dx = newX - touchX;
    player.x += dx;
    if(player.x < 0) player.x = 0;
    if(player.x + player.width > width) player.x = width - player.width;
    touchX = newX;
  }
});
canvas.addEventListener('touchend', e => { touchX = null; });

// Make canvas responsive
window.addEventListener('resize', () => {
  width = window.innerWidth;
  height = window.innerHeight;
  canvas.width = width;
  canvas.height = height;
  player.y = height - 60;
});
</script>

</body>
</html>